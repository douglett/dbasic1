<!DOCTYPE html>
<html>
<head>
	<title>dbasic 1 plan</title>
</head>
<body>



<h1>dbasic example</h1>

<h3>Empty program:</h3>
<div class="example_container">
	<div class="example left">
		<code>;; (empty)</code>
	</div>
	<div class="example right">
		<code>(module $dbasic_program</code>
		<code>	;; (empty)</code>
		<code>)</code>
	</div>
</div>


<h3>Function:</h3>
<div class="example_container">
	<div class="example left">
		<code>function foo()</code>
		<code>	;; (empty)</code>
		<code>end function</code>
	</div>
	<div class="example right">
		<code>(module $dbasic_program</code>
		<code>	;; (export "foo" (func $foo)) ;; out of line export?</code>
		<code>	(func $foo (export "foo") (result i32)</code>
		<code>		;; (empty)</code>
		<code>		(i32.const 0)</code>
		<code>	)</code>
		<code>)</code>
	</div>
</div>


<h3>Variables:</h3>
<div class="example_container">
	<div class="example left">
		<code>dim b = 10</code>
		<code>function foo()</code>
		<code>	dim a</code>
		<code>	dim b = 0</code>
		<code>end function</code>
	</div>
	<div class="example right">
		<code>(module $dbasic_program</code>
		<code>	(global $b (export "b") i32 (i32.const 0))</code>
		<code>	(func $foo (export "foo") (result i32)</code>
		<code>		(local $a i32)</code>
		<code>		(local $b i32)</code>
		<code>		(local.set $a (i32.const 0))</code>
		<code>		(local.set $b (i32.const 0))</code>
		<code>		(i32.const 0)</code>
		<code>	)</code>
		<code>)</code>
	</div>
</div>


<h3>If:</h3>
<div class="example_container">
	<div class="example left">
		<code>function foo()</code>
		<code>	dim a = 0</code>
		<code>	if a == 0 [then]</code>
		<code>		return 1</code>
		<code>	end [if]</code>
		<code>end function</code>
	</div>
	<div class="example right">
		<code>(module $dbasic_program</code>
		<code>	(func $foo (export "foo") (result i32)</code>
		<code>		(local $a i32)</code>
		<code>		(local.set $a (i32.const 0))</code>
		<code>		(if (i32.eq (local.get $a) (i32.const 0)) (block </code>
		<code>			(return (i32.const 1))</code>
		<code>		))</code>
		<code>		(i32.const 0)</code>
		<code>	)</code>
		<code>)</code>
	</div>
</div>


<h3>While:</h3>
<div class="example_container">
	<div class="example left">
		<code>function foo()</code>
		<code>	dim a = 0</code>
		<code>	while a < 10 [do]</code>
		<code>		a = a + 1</code>
		<code>	[wend|end [while]]</code>
		<code>end function</code>
	</div>
	<div class="example right">
		<code>(module $dbasic_program</code>
		<code>	(func $foo (export "foo") (result i32)</code>
		<code>		(local $a i32)</code>
		<code>		(local.set $a (i32.const 0))</code>
		<code>		(loop $loop1_top (block $loop1_end </code>
		<code>			(if (i32.lt_s (local.get $a) (i32.const 10)) (block </code>
		<code>				(local.set $a (i32.add (local.get $a) (i32.const 1)))</code>
		<code>				(br $loop1_top)</code>
		<code>			))</code>
		<code>		))</code>
		<code>		(i32.const 0)</code>
		<code>	)</code>
		<code>)</code>
	</div>
</div>


<h3>For:</h3>
<div class="example_container">
	<div class="example left">
		<code>function foo()</code>
		<code>	dim i</code>
		<code>	dim a</code>
		<code>	for i = 1 to 10 [step 1]</code>
		<code>		a = a + 1</code>
		<code>	next [i]</code>
		<code>end function</code>
	</div>
	<div class="example right">
		<code>(module $dbasic_program</code>
		<code>	(func $foo (export "foo") (result i32)</code>
		<code>		(local $i i32)</code>
		<code>		(local $a i32)</code>
		<code>		(local.set $i (i32.const 0))</code>
		<code>		(local.set $a (i32.const 0))</code>
		<code>		(local.set $i (i32.const 1))</code>
		<code>		(loop $loop0_top (block $loop0_end </code>
		<code>			;; ... </code>
		<code>		))</code>
		<code>		(i32.const 0)</code>
		<code>	)</code>
		<code>)</code>
	</div>
</div>


<style type="text/css">

.example_container {
	display: flex;
	/*flex-wrap: wrap;*/
	/*border: 1px solid black;*/
}
.example {
	/*box-sizing: border-box;*/
	width: 50%;
	padding: 5px;
	margin: 5px;
	border: 1px solid black;
	/*white-space: pre;*/
}
code {
	display: block;
	white-space: pre;
}

</style>

</body>
</html>